
<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
@* <MudDialogProvider/> *@
@* <MudSnackbarProvider/> *@
@* <MudSwitch @bind-Checked="@_isDarkMode" Color="Color.Primary" Class="ma-4" T="bool" Label="Toggle Light/Dark Mode"/> *@



<div class="page mud-layout">

    <div class="sidebar mud-elevation-1">
        <div class="top-row mud-drawer-head">
            <div>
                @* <a class="navbar-brand" href="https://mudblazor.com/" target="_blank">MudBlazor Server</a> *@
                <MudButton @onclick="ToggleNav" Icon="@Icons.Custom.Uncategorized.Radioactive" Style="color: white;" Link="https://github.com/MudBlazor/MudBlazor/" />
                <MudIconButton Icon="@Icons.Custom.Brands.MudBlazor" Style="color: white;" Link="https://mudblazor.com/" Target="_blank"/>
                <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Style="color: white;" Link="https://github.com/MudBlazor/MudBlazor/" Target="_blank"/>
            </div>
        </div>

        @* <input type="checkbox" title="Navigation menu" class="navbar-toggler"/> *@
      
            <TheNav />
        
          
        @* <div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()"> *@
        @*     <TheNav/> *@
        @* </div> *@

    </div>

    <main>
        <div class="top-row px-4">
            @* <MudIconButton Icon="@Icons.Custom.Brands.MudBlazor" Style="color: white;" Link="https://mudblazor.com/" Target="_blank" /> *@
            @* <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Style="color: white;" Link="https://github.com/MudBlazor/MudBlazor/" Target="_blank" /> *@
        </div>

        @* <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Class="my-2 pt-2"> *@
        @*     @Body *@
        @* </MudContainer> *@

        <MudMainContent>
            <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge">
                @* @Body *@
            </MudContainer>
        </MudMainContent>

    </main>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code{

    //Ran into issue https://github.com/dotnet/aspnetcore/issues/51151

    private MudTheme _theme = new();
    private bool _isDarkMode = true;
    private bool canGetReference = false;
    private TheNav theNav;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        // if (firstRender)
        // {
        //     _isDarkMode = await _theme.GetSystemPreference();
        //     StateHasChanged();
        // }
    }


    private void ToggleNav()
    {
        theNav.ToggleStartDrawer();
    }

}